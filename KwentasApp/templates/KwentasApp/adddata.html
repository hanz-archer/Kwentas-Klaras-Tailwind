{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Project Data</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-gray-50">
    <div class="flex">
        {% include 'KwentasApp/partials/aside.html' %}
        
        <!-- Main content - Card with responsive spacing and centering -->
        <div class="flex-1 min-h-screen p-4 sm:p-6 md:p-8 
                    ml-16 sm:ml-20 md:ml-40 lg:ml-60 xl:ml-64
                    transition-all duration-300 ease-in-out
                    flex items-center justify-center">
            <div class="bg-white rounded-lg shadow-sm p-4 sm:p-6 md:p-8 
                        w-full max-w-7xl mx-auto">
                <form action="{% url 'create_entry' %}" method="post" id="dataForm" class="space-y-8">
                    {% csrf_token %}
                    <div class="space-y-8">
                        <div class="border-b border-gray-900/10 pb-8">
                            <h2 class="text-base/7 font-semibold text-gray-900">Government Project Information</h2>
                            <p class="mt-1 text-sm/6 text-gray-600">Please fill in all the required details for this government project in accordance with official documentation standards.</p>

                            <div class="mt-8 grid grid-cols-1 gap-x-6 gap-y-6 pl-8">
                                <!-- PPA Field -->
                                <div class="col-span-full">
                                    <label for="ppa" class="block text-sm/6 font-medium text-gray-900">PPA</label>
                                    <div class="mt-2">
                                        <input type="text" name="ppa" id="ppa" required
                                            class="block w-full rounded-md bg-white px-3 py-1.5 text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                                    </div>
                                </div>

                                <!-- Two columns layout for form fields -->
                                <div class="col-span-full grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <!-- First column -->
                                    <div class="space-y-6">
                                        <!-- Implementing Unit Dropdown -->
                                        <div class="sm:col-span-3">
                                            <label for="departmentInput" class="block text-sm/6 font-medium text-gray-900">Implementing Unit</label>
                                            <div class="mt-2 relative">
                                                <input type="text" id="departmentInput" name="implementing_unit" readonly required
                                                    onclick="toggleDepartmentDropdown()"
                                                    placeholder="Select Department"
                                                    class="block w-full rounded-md bg-white px-3 py-1.5 text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6 cursor-pointer">
                                                <svg class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 size-4 text-gray-500" viewBox="0 0 16 16" fill="currentColor">
                                                    <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z"/>
                                                </svg>
                                                <ul id="departmentOptions" class="hidden absolute z-10 mt-1 w-full rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 max-h-60 overflow-auto">
                                                    <li onclick="selectDepartmentOption('Mayors Office')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Mayor's Office</li>
                                                    <li onclick="selectDepartmentOption('Tourism Office')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Tourism Office</li>
                                                    <li onclick="selectDepartmentOption('BAC Office')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">BAC Office</li>
                                                    <li onclick="selectDepartmentOption('Accountant Office')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Accountant Office</li>
                                                    <li onclick="selectDepartmentOption('Engineering Office')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Engineering Office</li>
                                                    <li onclick="selectDepartmentOption('PESO Office')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">PESO Office</li>
                                                    <li onclick="selectDepartmentOption('MDRRMO')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">MDRRMO</li>
                                                    <li onclick="selectDepartmentOption('Sanguniang Baranggay Office')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Sanguniang Barangay Office</li>
                                                    <li onclick="selectDepartmentOption('MPDC Office')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">MPDC</li>
                                                    <li onclick="selectDepartmentOption('MCR Office')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">MCR Office</li>
                                                    <li onclick="selectDepartmentOption('MBO Office')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">MBO Office</li>
                                                    <li onclick="selectDepartmentOption('Assessor Office')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Assessor's Office</li>
                                                    <li onclick="selectDepartmentOption('MHO Office')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">MHO Office</li>
                                                    <li onclick="selectDepartmentOption('Parks & Plaza')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Parks & Plaza</li>
                                                    <li onclick="selectDepartmentOption('MSWD Office')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">MSWD Office</li>
                                                    <li onclick="selectDepartmentOption('MENRO Office')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">MENRO Office</li>
                                                    <li onclick="selectDepartmentOption('MO')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">MO</li>
                                                    <li onclick="selectDepartmentOption('Streets & Bridges')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Streets & Bridges</li>
                                                    <li onclick="selectDepartmentOption('LDF')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">LDF</li>
                                                    <li onclick="selectDepartmentOption('Waterworks')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Waterworks</li>
                                                    <li onclick="selectDepartmentOption('Markets')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Markets</li>
                                                    <li onclick="selectDepartmentOption('Zero Waste')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Zero Waste</li>
                                                </ul>
                                            </div>
                                        </div>

                                        <!-- Location Dropdown -->
                                        <div class="sm:col-span-3">
                                            <label for="locationInput" class="block text-sm/6 font-medium text-gray-900">Location</label>
                                            <div class="mt-2 relative">
                                                <input type="text" id="locationInput" name="location" readonly required
                                                    onclick="toggleLocationDropdown()"
                                                    placeholder="Select Location"
                                                    class="block w-full rounded-md bg-white px-3 py-1.5 text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6 cursor-pointer">
                                                <svg class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 size-4 text-gray-500" viewBox="0 0 16 16" fill="currentColor">
                                                    <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z"/>
                                                </svg>
                                                <ul id="locationOptions" class="hidden absolute z-10 mt-1 w-full rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 max-h-60 overflow-auto">
                                                    <li onclick="selectLocationOption('Baranggay Baclayan')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Baranggay Baclayan</li>
                                                    <li onclick="selectLocationOption('Baranggay El Pardo')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Baranggay El Pardo</li>
                                                    <li onclick="selectLocationOption('Baranggay Granada')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Baranggay Granada</li>
                                                    <li onclick="selectLocationOption('Baranggay Lower Becerril')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Baranggay Lower Becerril</li>
                                                    <li onclick="selectLocationOption('Baranggay Poblacion')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Baranggay Poblacion</li>
                                                    <li onclick="selectLocationOption('Baranggay San Antonio')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Baranggay San Antonio</li>
                                                    <li onclick="selectLocationOption('Baranggay Upper Becerril')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Baranggay Upper Becerril</li>
                                                    <li onclick="selectLocationOption('Baranggay Arbor')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Baranggay Arbor</li>
                                                    <li onclick="selectLocationOption('Baranggay Lunop')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Baranggay Lunop</li>
                                                    <li onclick="selectLocationOption('Baranggay Nangka')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Baranggay Nangka</li>
                                                    <li onclick="selectLocationOption('Baranggay South Granada')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Baranggay South Granada</li>
                                                </ul>
                                            </div>
                                        </div>

                                        <!-- Appropriation Field -->
                                        <div class="sm:col-span-3">
                                            <label for="appropriation-input" class="block text-sm/6 font-medium text-gray-900">Appropriation</label>
                                            <div class="mt-2 relative">
                                                <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500">â‚±</span>
                                                <input type="text" id="appropriation-input" name="appropriation" required
                                                    class="block w-full rounded-md bg-white pl-7 pr-3 py-1.5 text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                                            </div>
                                        </div>

                                        <!-- Start Date Field -->
                                        <div class="sm:col-span-3">
                                            <label for="start_date" class="block text-sm/6 font-medium text-gray-900">Start Date</label>
                                            <div class="mt-2">
                                                <input type="date" id="start_date" name="start_date" required
                                                    class="block w-full rounded-md bg-white px-3 py-1.5 text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                                            </div>
                                        </div>

                                        <!-- End Date Field -->
                                        <div class="sm:col-span-3">
                                            <label for="end_date" class="block text-sm/6 font-medium text-gray-900">End Date</label>
                                            <div class="mt-2">
                                                <input type="date" id="end_date" name="end_date" required
                                                    class="block w-full rounded-md bg-white px-3 py-1.5 text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                                            </div>
                                        </div>

                                        <!-- Remarks Dropdown -->
                                        <div class="sm:col-span-3">
                                            <label for="remarksInput" class="block text-sm/6 font-medium text-gray-900">Remarks</label>
                                            <div class="mt-2 relative">
                                                <input type="text" id="remarksInput" name="remarks" readonly required
                                                    onclick="toggleRemarksDropdown()"
                                                    placeholder="Select Remarks"
                                                    class="block w-full rounded-md bg-white px-3 py-1.5 text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6 cursor-pointer">
                                                <svg class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 size-4 text-gray-500" viewBox="0 0 16 16" fill="currentColor">
                                                    <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z"/>
                                                </svg>
                                                <ul id="remarksOptions" class="hidden absolute z-10 mt-1 w-full rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5">
                                                    <li onclick="selectRemarksOption('No PPMP/APP/POW')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">No PPMP/APP/POW</li>
                                                    <li onclick="selectRemarksOption('Awarded Already')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Awarded Already</li>
                                                    <li onclick="selectRemarksOption('Finished Already')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Finished Already</li>
                                                </ul>
                                            </div>
                                        </div>

                                        <!-- Code Field -->
                                        <div class="sm:col-span-3">
                                            <label for="code" class="block text-sm/6 font-medium text-gray-900">Code</label>
                                            <div class="mt-2">
                                                <input type="text" id="code" name="code" required
                                                    class="block w-full rounded-md bg-white px-3 py-1.5 text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Second column -->
                                    <div class="space-y-6">
                                        <!-- Services Dropdown -->
                                        <div class="sm:col-span-3">
                                            <label for="servicesInput" class="block text-sm/6 font-medium text-gray-900">Services</label>
                                            <div class="mt-2 relative">
                                                <input type="text" id="servicesInput" name="services" readonly required
                                                    onclick="toggleServicesDropdown()"
                                                    placeholder="Select Service"
                                                    class="block w-full rounded-md bg-white px-3 py-1.5 text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6 cursor-pointer">
                                                <svg class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 size-4 text-gray-500" viewBox="0 0 16 16" fill="currentColor">
                                                    <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z"/>
                                                </svg>
                                                <ul id="servicesOptions" class="hidden absolute z-10 mt-1 w-full rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5">
                                                    <li onclick="selectServicesOption('General')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">General</li>
                                                    <li onclick="selectServicesOption('Social')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Social</li>
                                                    <li onclick="selectServicesOption('Economic')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Economic</li>
                                                    <li onclick="selectServicesOption('Environmental')" class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Environmental</li>
                                                </ul>
                                            </div>
                                        </div>

                                        <!-- Year Field -->
                                        <div class="sm:col-span-3">
                                            <label for="year" class="block text-sm/6 font-medium text-gray-900">Year</label>
                                            <div class="mt-2">
                                                <input type="number" id="year" name="year" required
                                                    class="block w-full rounded-md bg-white px-3 py-1.5 text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 flex items-center justify-end gap-x-6 pr-8">
                        <a href="{% url 'homepage' %}" id="cancelButton" 
                           class="rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
                            Cancel
                        </a>
                        <button type="submit" 
                                class="rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">
                            Save
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add this script section before closing body tag -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mainContent = document.querySelector('.flex-1');
            const sidebar = document.getElementById('logo-sidebar');
            const sidebarToggle = document.querySelector('[data-drawer-target="logo-sidebar"]');
            
            function adjustMainContentMargin() {
                // Get computed style to check if sidebar is visible
                const sidebarStyle = window.getComputedStyle(sidebar);
                const isSidebarVisible = sidebarStyle.display !== 'none' && 
                                       !sidebar.classList.contains('-translate-x-full');
                
                if (window.innerWidth < 640) { // sm breakpoint
                    mainContent.style.marginLeft = isSidebarVisible ? '16rem' : '1rem';
                } else if (window.innerWidth < 768) { // md breakpoint
                    mainContent.style.marginLeft = isSidebarVisible ? '16rem' : '5rem';
                } else if (window.innerWidth < 1024) { // lg breakpoint
                    mainContent.style.marginLeft = isSidebarVisible ? '16rem' : '10rem';
                } else { // xl and larger
                    mainContent.style.marginLeft = isSidebarVisible ? '16rem' : '15rem';
                }
            }

            // Watch for clicks on both the hamburger menu and close button
            document.addEventListener('click', function(e) {
                const isToggleButton = e.target.closest('[data-drawer-target="logo-sidebar"]');
                const isCloseButton = e.target.closest('[data-drawer-hide="logo-sidebar"]');
                
                if (isToggleButton || isCloseButton) {
                    // Give time for Flowbite's toggle to complete
                    setTimeout(adjustMainContentMargin, 50);
                }
            });

            // Watch for class changes on sidebar
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.attributeName === 'class') {
                        setTimeout(adjustMainContentMargin, 50);
                    }
                });
            });

            observer.observe(sidebar, {
                attributes: true,
                attributeFilter: ['class']
            });

            // Handle window resize
            let resizeTimer;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(adjustMainContentMargin, 100);
            });

            // Initial adjustment
            adjustMainContentMargin();
        });

        // Dropdown toggle functions
        function toggleDepartmentDropdown() {
            const options = document.getElementById('departmentOptions');
            const arrow = document.getElementById('departmentDropdownArrow');
            options.classList.toggle('hidden');
            if (arrow) {
                arrow.classList.toggle('rotate-180');
            }
        }

        function toggleLocationDropdown() {
            const options = document.getElementById('locationOptions');
            const arrow = document.getElementById('locationDropdownArrow');
            options.classList.toggle('hidden');
            if (arrow) {
                arrow.classList.toggle('rotate-180');
            }
        }

        function toggleServicesDropdown() {
            const options = document.getElementById('servicesOptions');
            const arrow = document.getElementById('servicesDropdownArrow');
            options.classList.toggle('hidden');
            if (arrow) {
                arrow.classList.toggle('rotate-180');
            }
        }

        function toggleRemarksDropdown() {
            const options = document.getElementById('remarksOptions');
            options.classList.toggle('hidden');
        }

        // Selection functions
        function selectDepartmentOption(value) {
            document.getElementById('departmentInput').value = value;
            toggleDepartmentDropdown();
        }

        function selectLocationOption(value) {
            document.getElementById('locationInput').value = value;
            toggleLocationDropdown();
        }

        function selectServicesOption(value) {
            document.getElementById('servicesInput').value = value;
            toggleServicesDropdown();
        }

        function selectRemarksOption(value) {
            document.getElementById('remarksInput').value = value;
            toggleRemarksDropdown();
        }

        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            const departmentDropdown = document.getElementById('departmentOptions');
            const locationDropdown = document.getElementById('locationOptions');
            const servicesDropdown = document.getElementById('servicesOptions');
            const remarksDropdown = document.getElementById('remarksOptions');

            // Department dropdown
            if (!event.target.matches('#departmentInput') && !event.target.closest('#departmentOptions')) {
                departmentDropdown.classList.add('hidden');
                const deptArrow = document.getElementById('departmentDropdownArrow');
                if (deptArrow && deptArrow.classList.contains('rotate-180')) {
                    deptArrow.classList.remove('rotate-180');
                }
            }

            // Location dropdown
            if (!event.target.matches('#locationInput') && !event.target.closest('#locationOptions')) {
                locationDropdown.classList.add('hidden');
                const locArrow = document.getElementById('locationDropdownArrow');
                if (locArrow && locArrow.classList.contains('rotate-180')) {
                    locArrow.classList.remove('rotate-180');
                }
            }

            // Services dropdown
            if (!event.target.matches('#servicesInput') && !event.target.closest('#servicesOptions')) {
                servicesDropdown.classList.add('hidden');
                const servArrow = document.getElementById('servicesDropdownArrow');
                if (servArrow && servArrow.classList.contains('rotate-180')) {
                    servArrow.classList.remove('rotate-180');
                }
            }

            // Remarks dropdown
            if (!event.target.matches('#remarksInput') && !event.target.closest('#remarksOptions')) {
                remarksDropdown.classList.add('hidden');
            }
        });

        // Form submission handling with SweetAlert2
        document.getElementById('dataForm').addEventListener('submit', function(event) {
            event.preventDefault();

            // Collecting form data
            const formData = {
                ppa: document.querySelector('input[name="ppa"]').value,
                implementing_unit: document.getElementById('departmentInput').value,
                location: document.getElementById('locationInput').value,
                appropriation: document.querySelector('input[name="appropriation"]').value,
                start_date: document.querySelector('input[name="start_date"]').value,
                end_date: document.querySelector('input[name="end_date"]').value,
                remarks: document.getElementById('remarksInput').value,
                code: document.querySelector('input[name="code"]').value,
                services: document.getElementById('servicesInput').value,
                year: document.querySelector('input[name="year"]').value
            };
            // SweetAlert2 confirmation
            Swal.fire({
                title: 'Confirm Submission',
                text: 'Are you sure you want to submit this form?',
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'Yes, submit it!',
                cancelButtonText: 'No, cancel',
                reverseButtons: true
            }).then((result) => {
                if (result.isConfirmed) {
                    // If confirmed, submit the form
                    this.submit();
                }
            });
        });

        // Input masking for appropriation field
        document.getElementById('appropriation-input').addEventListener('input', function(e) {
            // Remove any non-numeric characters except commas
            let value = e.target.value.replace(/[^0-9]/g, '');
            
            // Format the number with commas
            value = value.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            
            // Set the formatted value back to the input field
            e.target.value = value;
        });
    </script>
</body>
</html>

